<div class="tabs">
  <header class="grid grid-flow-col auto-cols-fr divide-x shadow-sm">
    {% for block in section.blocks %}
      <button
        class="tab-button py-3 px-4 text-uppercase font-semibold | hover:bg-slate-100"
        data-tab="{{ block.id }}"
        for="{{ block.id }}">
        {{ block.settings.title }}
      </button>
    {% endfor %}
  </header>

  {% for block in section.blocks %}
    <div class="tab-content content p-2 hidden" id="{{ block.id }}">
      {{ block.settings.content }}
    </div>
  {% endfor %}
</div>

<script defer>
  const buttons = document.querySelectorAll(".tab-button");
  const contents = document.querySelectorAll(".tab-content");
  const [defaulClass] = buttons.item(0).className.split(" | ");
  const ACTIVE = defaulClass + " text-white bg-teal-300 border-teal-300 hover:bg-teal-400 hover:border-teal-400";

  buttons.item(0).className = ACTIVE;
  contents.item(0).classList.remove("hidden");

  buttons.forEach((button, index) => {
    button.addEventListener("click", function() {
      const tabId = this.dataset.tab;

      contents.forEach(content => {
        if (content.id === tabId)
          return content.classList.remove("hidden");

        return content.classList.add("hidden");
      });

      buttons.forEach(item => {
        item.className = defaulClass;
      });

      this.className = ACTIVE;
    });
  });
</script>

{% schema %}
  {
    "name": "Tabs",
    "blocks": [
      {
        "type": "tab",
        "name": "Tab",
        "settings": [
          {
            "type": "text",
            "id": "title",
            "label": "Title",
            "default": "Tab Title"
          }, {
            "type": "textarea",
            "id": "content",
            "label": "Content",
            "default": "Tab Content"
          }
        ]
      }
    ]
  }
{% endschema %}